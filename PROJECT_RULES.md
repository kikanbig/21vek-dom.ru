# Правила проекта: Мульти-репозиторий конструктор сайта 21vek-dom.ru

## Общая концепция

Сайт `21vek-dom.ru` представляет собой **конструктор из нескольких GitHub репозиториев**, где каждый репозиторий становится отдельной страницей или разделом сайта.

## Архитектура

### Основной репозиторий
- **Репозиторий**: `21vek-dom.ru`
- **Роль**: Главный контейнер приложения
- **Технологии**: React + Vite + TypeScript + Tailwind CSS + shadcn/ui
- **Структура**:
  ```
  21vek-dom.ru/
  ├── src/
  │   ├── components/     # Компоненты из интегрированных репозиториев
  │   ├── pages/         # Страницы (Index, Sets, NotFound, будущие)
  │   ├── data/          # Данные из интегрированных репозиториев
  │   ├── hooks/         # Переиспользуемые хуки
  │   ├── lib/           # Утилиты
  │   └── assets/        # Ресурсы из всех репозиториев
  ├── repos/            # Клонированные репозитории (для разработки)
  └── PROJECT_RULES.md  # Правила интеграции новых репозиториев
  ```

### Подключенные репозитории

#### 1. Главная страница - `hoff-divan-insights`
- **GitHub**: https://github.com/kikanbig/hoff-divan-insights.git
- **Статус**: ✅ Интегрирован
- **Описание**: Полнофункциональный мебельный интернет-магазин с каталогом, товарами, hero-секцией
- **Маршрут**: `/` (главная страница)

## Правила интеграции новых репозиториев

### Шаг 1: Клонирование репозитория
```bash
# В корневой папке проекта
git clone <repository-url> repos/<repo-name>
```

### Шаг 2: Анализ структуры
- Изучить `package.json` для понимания зависимостей
- Проанализировать компоненты и их структуру
- Определить, какие файлы нужно интегрировать

### Шаг 3: Интеграция зависимостей
- Добавить необходимые зависимости в основной `package.json`
- Обновить конфигурационные файлы (TypeScript, Tailwind, Vite)
- Установить новые пакеты: `npm install`

### Шаг 4: Копирование кода
- Скопировать компоненты в `src/components/`
- Скопировать страницы в `src/pages/`
- Скопировать ассеты в `src/assets/`
- Скопировать хуки в `src/hooks/`

### Шаг 5: Настройка маршрутизации
- Добавить новый маршрут в `src/App.tsx`
- Создать соответствующую страницу-обертку

### Шаг 6: Тестирование
- Запустить dev-сервер: `npm run dev`
- Проверить работоспособность
- Исправить конфликты зависимостей

## Правила именования

### Компоненты
- Использовать PascalCase: `ProductCard`, `HeroSection`
- Префиксы для специфических компонентов: `Header`, `Footer`

### Страницы
- Названия страниц совпадают с именами репозиториев
- Расположение: `src/pages/`

### Маршруты
- Главная страница: `/`
- Другие страницы: `/<repo-name>`

## Технологический стек

### Обязательные технологии
- **React 18+**
- **TypeScript**
- **Tailwind CSS**
- **shadcn/ui** (для компонентов)
- **Vite** (сборщик)

### Рекомендуемые технологии
- **React Router** (маршрутизация)
- **React Query** (управление данными)
- **Lucide React** (иконки)

## Управление зависимостями

### Добавление новых зависимостей
1. Проверить, нет ли уже такой зависимости в основном проекте
2. Если версия отличается - выбрать наиболее новую совместимую
3. Добавить в `package.json`
4. Выполнить `npm install`

### Конфликты версий
- Приоритет отдается стабильным версиям
- Тестировать совместимость при обновлениях

## Структура файлов

### Общие правила
- Все импорты через алиасы: `@/components/*`, `@/pages/*`
- Типизация обязательна для всех компонентов
- CSS через Tailwind classes

### Организация компонентов
```
src/components/
├── ui/           # shadcn/ui компоненты
├── common/       # Общие компоненты
└── [repo-name]/  # Компоненты из конкретного репозитория
```

## Деплой и CI/CD

### Сборка
```bash
npm run build    # Продакшн сборка
npm run preview  # Предпросмотр сборки
```

### Деплой на Railway
- Используется Railway CLI
- Автоматический деплой при пуше в main

## Документация

### Обновление документации
- Все изменения в коде должны быть отражены в документации
- Обновлять этот файл при добавлении новых репозиториев

### README для каждого репозитория
- Краткое описание функционала
- Список используемых технологий
- Инструкция по локальному запуску

## Мониторинг и поддержка

### Логирование
- Использовать console для разработки
- Для продакшена настроить централизованное логирование

### Обработка ошибок
- Graceful error handling
- Fallback компоненты для критических ошибок

## Безопасность

### Проверки
- ESLint для кода
- TypeScript strict mode
- Проверка зависимостей на уязвимости

### Данные
- Валидация всех входных данных
- Безопасное хранение секретов
- HTTPS обязательна для продакшена

## Процесс добавления нового репозитория

### Чек-лист
- [ ] Репозиторий клонирован в `repos/`
- [ ] Зависимости добавлены в `package.json`
- [ ] Код скопирован в соответствующие папки
- [ ] Маршрутизация настроена
- [ ] Тестирование проведено
- [ ] Документация обновлена
- [ ] Коммит создан с описанием изменений

---

## Текущий статус интеграции

| Репозиторий | Статус | Маршрут | Описание |
|-------------|--------|---------|----------|
| [hoff-divan-insights](https://github.com/kikanbig/hoff-divan-insights) | ✅ Интегрирован | `/` | Главная страница - мебельный интернет-магазин |
| [project-2870847f-5dea-434d-9cca-4fbca27ed98e](https://github.com/kikanbig/project-2870847f-5dea-434d-9cca-4fbca27ed98e.git) | ✅ Интегрирован | `/sets` | Страница сетов для держателей карт «Любимый покупатель» |

## Следующие шаги

1. **Добавить репозиторий для раздела "О компании"**
2. **Добавить репозиторий для каталога товаров**
3. **Добавить репозиторий для блога/новостей**
4. **Интегрировать систему управления контентом**
5. **Настроить мультиязычность**

---

*Этот документ должен обновляться при каждом добавлении нового репозитория или изменении архитектуры проекта.*
